<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vista de Cuenta</title>

  <!-- Fuentes -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet" />

  <!-- Estilos -->
  <link rel="stylesheet" href="./style/style.css" />

  <!-- jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>

<body>
  <!-- 🔶 Barra de navegación -->
  <div class="barra-de-tareas">
    <a href="/src/features/vista_comandas/Comandas.html">
      <button class="BotonA">Comandar</button>
    </a>
    <button class="BotonC">Cuenta</button>
    <!-- Enlace a Mesas: el destino se determinará dinámicamente según el rol del usuario -->
    <a id="linkMesas" href="#">
      <button class="BotonB">Mesas</button>
    </a>
    <div class="estado-usuario">
      <span class="estado"></span>
      <!-- El nombre de usuario y la mesa se llenarán dinámicamente -->
      <span class="usuario"></span>
    </div>
  </div>

  <!-- 🔷 Contenido principal -->
  <main class="main-container">
    <!-- 📋 Panel izquierdo -->
    <div class="left-panel">
      <div class="table-display-box">
        <!-- Mostramos el icono de la mesa y, debajo, el número de mesa seleccionado.  La imagen se mantiene estática y
             el número se rellena dinámicamente con JavaScript utilizando el valor almacenado en localStorage. -->
        <img id="table-icon" src="/src/assets/icon mesa.png" alt="Icono Mesa" class="mesa-icon" />
        <span id="table-number" class="mesa-number"></span>
      </div>
      <div class="button-group">
        <a href="/src/features/gestion_comandas/GestionComandas.html">
          <button class="action-button secondary">Visualizar</button>
        </a>
        <button id="btnImprimir" class="action-button">Imprimir</button>
      </div>
      <!-- Botón para cerrar la cuenta.  Se le asigna un identificador para poder
           capturar el evento desde JavaScript y así reabrir la mesa en el
           backend. -->
      <button id="btnCerrarCuenta" class="action-button">Cerrar cuenta</button>
    </div>

    <!-- 🧾 Panel derecho: Cuenta -->
    <div class="right-panel">
      <div class="receipt-header">
        <h2>Restapp</h2>
        <p>Suchiapa, CHIS</p>
      </div>

      <table id="tablaCuenta" class="receipt-table">
        <tbody></tbody>
      </table>

      <div class="totales">
        <!-- Incluimos el número de personas seleccionado en la apertura.  Se rellenará dinámicamente
             mediante JavaScript a partir de la información guardada en localStorage. -->
        <p>Número de personas: <span id="num-personas"></span></p>
        <p>Subtotal: <span id="subtotal"></span></p>
        <p>IVA: <span id="iva"></span></p>
        <p>Total: <span id="total"></span></p>
      </div>
    </div>
  </main>

  <!-- 🔻 Script principal -->
  <script src="script/striptc.js"></script>
</body>
</html>
